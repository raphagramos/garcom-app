{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rapha\\\\Documents\\\\Git Project\\\\garcom\\\\src\\\\screens\\\\PedidoScreen.tsx\";\nimport React, { useMemo, useState } from \"react\";\nimport styled, { ThemeProvider } from \"styled-components/native\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { theme } from \"../styles/theme\";\nimport { useLanches } from \"../store/useLanches\";\nimport IngredientFlag from \"../components/IngredientFlag\";\nimport Button from \"../components/Button\";\nimport Input from \"../components/Input\";\nimport { usePedidos } from \"../store/usePedidos\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.SafeAreaView`\n  flex: 1;\n  background-color: ${({\n  theme\n}) => theme.colors.background};\n  padding: 16px;\n`;\nconst Title = styled.Text`\n  font-size: 22px;\n  font-weight: 800;\n  color: ${({\n  theme\n}) => theme.colors.text};\n  margin-bottom: 8px;\n`;\nconst Subtle = styled.Text`\n  color: ${({\n  theme\n}) => theme.colors.subtle};\n  margin-bottom: 8px;\n`;\nexport default function PedidoScreen({\n  route,\n  navigation\n}) {\n  const {\n    lancheId\n  } = route.params;\n  const {\n    getById\n  } = useLanches();\n  const {\n    addPedido\n  } = usePedidos();\n  const lanche = getById(lancheId);\n  const [note, setNote] = useState(\"\");\n  const [flags, setFlags] = useState(() => {\n    const initial = {};\n    lanche?.ingredients.forEach(i => initial[i.id] = true);\n    return initial;\n  });\n  const excludedNames = useMemo(() => {\n    if (!lanche) return [];\n    return lanche.ingredients.filter(i => flags[i.id] === false).map(i => i.name);\n  }, [flags, lanche]);\n  if (!lanche) {\n    return _jsxDEV(ThemeProvider, {\n      theme: theme,\n      children: _jsxDEV(Container, {\n        children: [_jsxDEV(Subtle, {\n          children: \"Ops, lanche n\\xE3o encontrado.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), _jsxDEV(Button, {\n          title: \"Voltar\",\n          onPress: () => navigation.goBack()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  }\n  function salvar() {\n    const excludedIds = Object.entries(flags).filter(([_, v]) => v === false).map(([k]) => k);\n    const orderId = addPedido({\n      lancheId: lanche.id,\n      excludedIngredientIds: excludedIds,\n      note\n    });\n    Alert.alert(\"Pedido salvo\", `Pedido #${orderId.split(\"_\").pop()} criado.`);\n    navigation.goBack();\n  }\n  return _jsxDEV(ThemeProvider, {\n    theme: theme,\n    children: _jsxDEV(Container, {\n      children: [_jsxDEV(Title, {\n        children: lanche.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), _jsxDEV(Subtle, {\n        children: \"Marque para INCLUIR \\u2014 desmarque o que o cliente N\\xC3O quer.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), _jsxDEV(FlatList, {\n        data: lanche.ingredients,\n        keyExtractor: item => item.id,\n        renderItem: ({\n          item\n        }) => _jsxDEV(IngredientFlag, {\n          ingredient: item,\n          value: flags[item.id] !== false,\n          onChange: next => setFlags(prev => Object.assign({}, prev, {\n            [item.id]: next\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), _jsxDEV(Input, {\n        placeholder: \"Observa\\xE7\\xF5es (ex.: ponto da carne, pouco sal)\",\n        value: note,\n        onChangeText: setNote\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), excludedNames.length > 0 ? _jsxDEV(Subtle, {\n        children: [\"Sem: \", excludedNames.join(\", \")]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this) : _jsxDEV(Subtle, {\n        children: \"Nenhum ingrediente removido.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this), _jsxDEV(Button, {\n        title: \"Salvar Pedido\",\n        variant: \"success\",\n        onPress: salvar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"names":["React","useMemo","useState","styled","ThemeProvider","Alert","FlatList","theme","useLanches","IngredientFlag","Button","Input","usePedidos","jsxDEV","_jsxDEV","Container","SafeAreaView","colors","background","Title","Text","text","Subtle","subtle","PedidoScreen","route","navigation","lancheId","params","getById","addPedido","lanche","note","setNote","flags","setFlags","initial","ingredients","forEach","i","id","excludedNames","filter","map","name","children","fileName","_jsxFileName","lineNumber","columnNumber","title","onPress","goBack","salvar","excludedIds","Object","entries","_","v","k","orderId","excludedIngredientIds","alert","split","pop","data","keyExtractor","item","renderItem","ingredient","value","onChange","next","prev","assign","placeholder","onChangeText","length","join","variant"],"sources":["C:/Users/Rapha/Documents/Git Project/garcom/src/screens/PedidoScreen.tsx"],"sourcesContent":["import React, { useMemo, useState } from \"react\";\nimport styled, { ThemeProvider } from \"styled-components/native\";\nimport { Alert, FlatList } from \"react-native\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { RootStackParamList } from \"../types\";\nimport { theme } from \"../styles/theme\";\nimport { useLanches } from \"../store/useLanches\";\nimport IngredientFlag from \"../components/IngredientFlag\";\nimport Button from \"../components/Button\";\nimport Input from \"../components/Input\";\nimport { usePedidos } from \"../store/usePedidos\";\n\nconst Container = styled.SafeAreaView`\n  flex: 1;\n  background-color: ${({ theme }) => theme.colors.background};\n  padding: 16px;\n`;\n\nconst Title = styled.Text`\n  font-size: 22px;\n  font-weight: 800;\n  color: ${({ theme }) => theme.colors.text};\n  margin-bottom: 8px;\n`;\n\nconst Subtle = styled.Text`\n  color: ${({ theme }) => theme.colors.subtle};\n  margin-bottom: 8px;\n`;\n\ntype Props = NativeStackScreenProps<RootStackParamList, \"Pedido\">;\n\nexport default function PedidoScreen({ route, navigation }: Props) {\n  const { lancheId } = route.params;\n  const { getById } = useLanches();\n  const { addPedido } = usePedidos();\n  const lanche = getById(lancheId);\n\n  const [note, setNote] = useState<string>(\"\");\n\n  const [flags, setFlags] = useState<Record<string, boolean>>(() => {\n    const initial: Record<string, boolean> = {};\n    lanche?.ingredients.forEach(i => initial[i.id] = true); // true = inclui\n    return initial;\n  });\n\n  const excludedNames = useMemo(() => {\n    if (!lanche) return [];\n    return lanche.ingredients\n      .filter(i => flags[i.id] === false)\n      .map(i => i.name);\n  }, [flags, lanche]);\n\n  if (!lanche) {\n    return (\n      <ThemeProvider theme={theme}>\n        <Container>\n          <Subtle>Ops, lanche não encontrado.</Subtle>\n          <Button title=\"Voltar\" onPress={() => navigation.goBack()} />\n        </Container>\n      </ThemeProvider>\n    );\n  }\n\n  function salvar() {\n    const excludedIds = Object.entries(flags).filter(([_, v]) => v === false).map(([k]) => k);\n    const orderId = addPedido({ lancheId: lanche.id, excludedIngredientIds: excludedIds, note });\n    Alert.alert(\"Pedido salvo\", `Pedido #${orderId.split(\"_\").pop()} criado.`);\n    navigation.goBack();\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Container>\n        <Title>{lanche.name}</Title>\n        <Subtle>Marque para INCLUIR — desmarque o que o cliente NÃO quer.</Subtle>\n\n        <FlatList\n          data={lanche.ingredients}\n          keyExtractor={(item) => item.id}\n          renderItem={({ item }) => (\n            <IngredientFlag\n              ingredient={item}\n              value={flags[item.id] !== false}\n              onChange={(next) => setFlags(prev => ({ ...prev, [item.id]: next }))}\n            />\n          )}\n        />\n\n        <Input placeholder=\"Observações (ex.: ponto da carne, pouco sal)\"\n          value={note}\n          onChangeText={setNote} />\n\n        {excludedNames.length > 0 ? (\n          <Subtle>Sem: {excludedNames.join(\", \")}</Subtle>\n        ) : <Subtle>Nenhum ingrediente removido.</Subtle>}\n\n        <Button title=\"Salvar Pedido\" variant=\"success\" onPress={salvar} />\n      </Container>\n    </ThemeProvider>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}